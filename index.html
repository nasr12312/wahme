<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฃุฏุงุฉ ูุญุต Gemini API</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
        body { font-family: 'Cairo', sans-serif; }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-break: break-all;
        }
        .loading {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">๐ค ุฃุฏุงุฉ ูุญุต Gemini API</h1>
            <p class="text-gray-600">ุงุฎุชุจุฑ ููุญุต ุงุณุชุฌุงุจุงุช API ุงูุฎุงุต ุจู Google Gemini</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Request Panel -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
                    ๐ค ุฅุนุฏุงุฏ ุงูุทูุจ
                </h2>

                <!-- API Key -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ููุชุงุญ API</label>
                    <input type="password" id="apiKey" 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                           placeholder="ุฃุฏุฎู ููุชุงุญ API ุงูุฎุงุต ุจู">
                    <p class="text-xs text-gray-500 mt-1">๐ ุฃุฏุฎู ููุชุงุญ API ุงูุญูููู ูู Google AI Studio</p>
                </div>

                <!-- Model Selection -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ุงููููุฐุฌ</label>
                    <select id="modelSelect" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="gemini-pro">gemini-pro</option>
                        <option value="gemini-pro-vision">gemini-pro-vision</option>
                        <option value="gemini-1.5-pro">gemini-1.5-pro</option>
                        <option value="gemini-1.5-flash">gemini-1.5-flash</option>
                    </select>
                </div>

                <!-- Request Type -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ููุน ุงูุทูุจ</label>
                    <div class="flex gap-4">
                        <label class="flex items-center">
                            <input type="radio" name="requestType" value="generateContent" checked class="ml-2">
                            <span>ุชูููุฏ ุงููุญุชูู</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="requestType" value="streamGenerateContent" class="ml-2">
                            <span>ุงูุชุฏูู ุงููุจุงุดุฑ</span>
                        </label>
                    </div>
                </div>

                <!-- Message Input -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุฑุณุงูุฉ</label>
                    <textarea id="messageInput" rows="4" 
                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                              placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง...">ูุฑุญุจุงุ ููู ููููู ูุณุงุนุฏุชูุ</textarea>
                </div>

                <!-- Parameters -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-700 mb-3">ุงููุนุงููุงุช</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-gray-600 mb-1">Temperature</label>
                            <input type="number" id="temperature" value="0.7" min="0" max="1" step="0.1"
                                   class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm text-gray-600 mb-1">Max Tokens</label>
                            <input type="number" id="maxTokens" value="1000" min="1" max="8192"
                                   class="w-full px-3 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                </div>

                <!-- Send Button -->
                <button id="sendRequest" 
                        class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-6 rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 transform hover:scale-105">
                    ๐ ุฅุฑุณุงู ุงูุทูุจ
                </button>
            </div>

            <!-- Response Panel -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
                    ๐ฅ ุงูุงุณุชุฌุงุจุฉ
                </h2>

                <!-- Status -->
                <div id="statusSection" class="mb-4 hidden">
                    <!-- Success/Failure Indicator -->
                    <div id="resultIndicator" class="mb-4 p-4 rounded-lg border-2 text-center">
                        <div id="resultIcon" class="text-4xl mb-2"></div>
                        <div id="resultText" class="font-bold text-lg"></div>
                        <div id="resultSubtext" class="text-sm mt-1"></div>
                    </div>
                    
                    <div class="flex items-center gap-2 mb-2">
                        <span class="text-sm font-medium text-gray-600">ุงูุญุงูุฉ:</span>
                        <span id="statusCode" class="px-2 py-1 rounded text-xs font-medium"></span>
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-sm font-medium text-gray-600">ููุช ุงูุงุณุชุฌุงุจุฉ:</span>
                        <span id="responseTime" class="text-sm text-gray-800"></span>
                    </div>
                </div>

                <!-- Response Content -->
                <div id="responseContent" class="min-h-[300px] border-2 border-dashed border-gray-200 rounded-lg p-4 flex items-center justify-center text-gray-500">
                    <div class="text-center">
                        <div class="text-4xl mb-2">๐ค</div>
                        <p>ุงูุงุณุชุฌุงุจุฉ ุณุชุธูุฑ ููุง ุจุนุฏ ุฅุฑุณุงู ุงูุทูุจ</p>
                    </div>
                </div>

                <!-- Loading State -->
                <div id="loadingState" class="hidden min-h-[300px] flex items-center justify-center">
                    <div class="text-center">
                        <div class="loading text-4xl mb-4">โก</div>
                        <p class="text-gray-600">ุฌุงุฑู ูุนุงูุฌุฉ ุงูุทูุจ...</p>
                    </div>
                </div>

                <!-- Copy Button -->
                <button id="copyResponse" 
                        class="mt-4 w-full bg-gray-100 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors duration-200 hidden">
                    ๐ ูุณุฎ ุงูุงุณุชุฌุงุจุฉ
                </button>
            </div>
        </div>

        <!-- Request History -->
        <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
                ๐ ุณุฌู ุงูุทูุจุงุช
            </h2>
            <div id="requestHistory" class="space-y-4">
                <p class="text-gray-500 text-center py-8">ูุง ุชูุฌุฏ ุทูุจุงุช ุณุงุจูุฉ</p>
            </div>
        </div>

        <!-- API Documentation -->
        <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6 flex items-center">
                ๐ ูุนูููุงุช API
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <h3 class="font-semibold text-gray-700 mb-2">ููุงุท ุงูููุงูุฉ ุงููุชุงุญุฉ:</h3>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>โข <code>/v1/models/{model}:generateContent</code></li>
                        <li>โข <code>/v1/models/{model}:streamGenerateContent</code></li>
                        <li>โข <code>/v1/models</code> (ูุงุฆูุฉ ุงูููุงุฐุฌ)</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-700 mb-2">ุฑููุฒ ุงูุงุณุชุฌุงุจุฉ:</h3>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>โข <span class="text-green-600">200</span> - ูุฌุญ ุงูุทูุจ</li>
                        <li>โข <span class="text-yellow-600">400</span> - ุฎุทุฃ ูู ุงูุทูุจ</li>
                        <li>โข <span class="text-red-600">401</span> - ุบูุฑ ูุตุฑุญ</li>
                        <li>โข <span class="text-red-600">429</span> - ุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-700 mb-2">ุงูุญุตูู ุนูู ููุชุงุญ API:</h3>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>โข ุงูุชูู ุฅูู <a href="https://makersuite.google.com/app/apikey" target="_blank" class="text-blue-600 hover:underline">Google AI Studio</a></li>
                        <li>โข ุฃูุดุฆ ููุชุงุญ API ุฌุฏูุฏ</li>
                        <li>โข ุงูุณุฎ ุงูููุชุงุญ ูุงูุตูู ูู ุงูุญูู ุฃุนูุงู</li>
                        <li>โข ุงุจุฏุฃ ูู ุงุฎุชุจุงุฑ API ุงูุญูููู!</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        class GeminiAPITester {
            constructor() {
                this.history = [];
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                document.getElementById('sendRequest').addEventListener('click', () => this.sendRequest());
                document.getElementById('copyResponse').addEventListener('click', () => this.copyResponse());
                
                // Enter key to send
                document.getElementById('messageInput').addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 'Enter') {
                        this.sendRequest();
                    }
                });
            }

            async sendRequest() {
                const apiKey = document.getElementById('apiKey').value.trim();
                const model = document.getElementById('modelSelect').value;
                const requestType = document.querySelector('input[name="requestType"]:checked').value;
                const message = document.getElementById('messageInput').value.trim();
                const temperature = parseFloat(document.getElementById('temperature').value);
                const maxTokens = parseInt(document.getElementById('maxTokens').value);

                if (!apiKey) {
                    this.showError('ูุฑุฌู ุฅุฏุฎุงู ููุชุงุญ API');
                    return;
                }

                if (!message) {
                    this.showError('ูุฑุฌู ุฅุฏุฎุงู ุฑุณุงูุฉ');
                    return;
                }

                this.showLoading();
                const startTime = Date.now();

                try {
                    // Call the real Gemini API
                    const response = await this.callGeminiAPI(model, message, temperature, maxTokens, requestType, apiKey);
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;

                    this.showResponse(response, 200, responseTime);
                    this.addToHistory(model, message, response, 200, responseTime);

                } catch (error) {
                    const endTime = Date.now();
                    const responseTime = endTime - startTime;
                    const statusCode = error.statusCode || 500;
                    this.showError(error.message, statusCode, responseTime);
                    this.addToHistory(model, message, error.message, statusCode, responseTime);
                }
            }

            async callGeminiAPI(model, message, temperature, maxTokens, requestType, apiKey) {
                const baseUrl = 'https://generativelanguage.googleapis.com/v1beta/models';
                const endpoint = requestType === 'streamGenerateContent' ? 'streamGenerateContent' : 'generateContent';
                const url = `${baseUrl}/${model}:${endpoint}?key=${apiKey}`;

                const requestBody = {
                    contents: [{
                        parts: [{
                            text: message
                        }]
                    }],
                    generationConfig: {
                        temperature: temperature,
                        maxOutputTokens: maxTokens,
                        topP: 0.8,
                        topK: 10
                    },
                    safetySettings: [
                        {
                            category: "HARM_CATEGORY_HARASSMENT",
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        },
                        {
                            category: "HARM_CATEGORY_HATE_SPEECH",
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        },
                        {
                            category: "HARM_CATEGORY_SEXUALLY_EXPLICIT",
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        },
                        {
                            category: "HARM_CATEGORY_DANGEROUS_CONTENT",
                            threshold: "BLOCK_MEDIUM_AND_ABOVE"
                        }
                    ]
                };

                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestBody)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    const error = new Error(errorData.error?.message || `HTTP ${response.status}: ${response.statusText}`);
                    error.statusCode = response.status;
                    throw error;
                }

                const data = await response.json();
                return data;
            }

            showLoading() {
                document.getElementById('responseContent').classList.add('hidden');
                document.getElementById('loadingState').classList.remove('hidden');
                document.getElementById('statusSection').classList.add('hidden');
                document.getElementById('copyResponse').classList.add('hidden');
            }

            showResponse(response, statusCode, responseTime) {
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('responseContent').classList.remove('hidden');
                document.getElementById('statusSection').classList.remove('hidden');
                document.getElementById('copyResponse').classList.remove('hidden');

                // Update result indicator
                this.updateResultIndicator(statusCode === 200, statusCode, responseTime);

                // Update status
                const statusElement = document.getElementById('statusCode');
                statusElement.textContent = statusCode;
                statusElement.className = `px-2 py-1 rounded text-xs font-medium ${
                    statusCode === 200 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                }`;

                document.getElementById('responseTime').textContent = `${responseTime}ms`;

                // Show response
                const responseContent = document.getElementById('responseContent');
                if (response.candidates && response.candidates[0]) {
                    const text = response.candidates[0].content.parts[0].text;
                    responseContent.innerHTML = `
                        <div class="mb-4">
                            <h3 class="font-semibold text-gray-700 mb-2">ุงููุต ุงููููุฏ:</h3>
                            <div class="bg-gray-50 p-4 rounded-lg border-r-4 border-blue-500">
                                ${text.replace(/\n/g, '<br>')}
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold text-gray-700 mb-2">ุงูุงุณุชุฌุงุจุฉ ุงููุงููุฉ (JSON):</h3>
                            <div class="code-block text-xs overflow-x-auto">
${JSON.stringify(response, null, 2)}
                            </div>
                        </div>
                    `;
                } else {
                    responseContent.innerHTML = `
                        <div class="code-block text-xs overflow-x-auto">
${JSON.stringify(response, null, 2)}
                        </div>
                    `;
                }
            }

            showError(message, statusCode = 500, responseTime = 0) {
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('responseContent').classList.remove('hidden');
                document.getElementById('statusSection').classList.remove('hidden');

                // Update result indicator
                this.updateResultIndicator(false, statusCode, responseTime);

                // Update status
                const statusElement = document.getElementById('statusCode');
                statusElement.textContent = statusCode;
                statusElement.className = 'px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800';

                if (responseTime > 0) {
                    document.getElementById('responseTime').textContent = `${responseTime}ms`;
                }

                // Show error
                document.getElementById('responseContent').innerHTML = `
                    <div class="text-center text-red-600">
                        <div class="text-4xl mb-2">โ</div>
                        <p class="font-semibold">ุฎุทุฃ ูู ุงูุทูุจ</p>
                        <p class="text-sm mt-2">${message}</p>
                    </div>
                `;
            }

            updateResultIndicator(isSuccess, statusCode, responseTime) {
                const indicator = document.getElementById('resultIndicator');
                const icon = document.getElementById('resultIcon');
                const text = document.getElementById('resultText');
                const subtext = document.getElementById('resultSubtext');

                if (isSuccess) {
                    // Success state
                    indicator.className = 'mb-4 p-4 rounded-lg border-2 text-center bg-green-50 border-green-200';
                    icon.textContent = 'โ';
                    text.textContent = 'ูุฌุญ ุงูุทูุจ';
                    text.className = 'font-bold text-lg text-green-800';
                    subtext.textContent = `ุชู ุงูุญุตูู ุนูู ุงูุงุณุชุฌุงุจุฉ ุจูุฌุงุญ ูู ${responseTime}ms`;
                    subtext.className = 'text-sm mt-1 text-green-600';
                } else {
                    // Failure state
                    indicator.className = 'mb-4 p-4 rounded-lg border-2 text-center bg-red-50 border-red-200';
                    icon.textContent = 'โ';
                    text.textContent = 'ูุดู ุงูุทูุจ';
                    text.className = 'font-bold text-lg text-red-800';
                    
                    let errorMessage = 'ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ูุนุงูุฌุฉ ุงูุทูุจ';
                    switch(statusCode) {
                        case 400:
                            errorMessage = 'ุฎุทุฃ ูู ุจูุงูุงุช ุงูุทูุจ ุงููุฑุณู';
                            break;
                        case 401:
                            errorMessage = 'ููุชุงุญ API ุบูุฑ ุตุญูุญ ุฃู ููุชูู ุงูุตูุงุญูุฉ';
                            break;
                        case 403:
                            errorMessage = 'ุบูุฑ ูุตุฑุญ ูู ุจุงููุตูู ููุฐุง ุงูููุฑุฏ';
                            break;
                        case 429:
                            errorMessage = 'ุชู ุชุฌุงูุฒ ุงูุญุฏ ุงููุณููุญ ูู ุงูุทูุจุงุช';
                            break;
                        case 500:
                            errorMessage = 'ุฎุทุฃ ูู ุงูุฎุงุฏู ุงูุฏุงุฎูู';
                            break;
                    }
                    
                    subtext.textContent = errorMessage;
                    subtext.className = 'text-sm mt-1 text-red-600';
                }
            }

            copyResponse() {
                const responseElement = document.getElementById('responseContent');
                const text = responseElement.textContent || responseElement.innerText;
                
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(() => {
                        const button = document.getElementById('copyResponse');
                        const originalText = button.textContent;
                        button.textContent = 'โ ุชู ุงููุณุฎ!';
                        setTimeout(() => {
                            button.textContent = originalText;
                        }, 2000);
                    });
                } else {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    
                    const button = document.getElementById('copyResponse');
                    const originalText = button.textContent;
                    button.textContent = 'โ ุชู ุงููุณุฎ!';
                    setTimeout(() => {
                        button.textContent = originalText;
                    }, 2000);
                }
            }

            addToHistory(model, message, response, statusCode, responseTime) {
                const historyItem = {
                    timestamp: new Date().toLocaleString('ar-SA'),
                    model,
                    message: message.substring(0, 50) + (message.length > 50 ? '...' : ''),
                    statusCode,
                    responseTime
                };

                this.history.unshift(historyItem);
                if (this.history.length > 10) {
                    this.history = this.history.slice(0, 10);
                }

                this.updateHistoryDisplay();
            }

            updateHistoryDisplay() {
                const historyContainer = document.getElementById('requestHistory');
                
                if (this.history.length === 0) {
                    historyContainer.innerHTML = '<p class="text-gray-500 text-center py-8">ูุง ุชูุฌุฏ ุทูุจุงุช ุณุงุจูุฉ</p>';
                    return;
                }

                historyContainer.innerHTML = this.history.map(item => `
                    <div class="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-sm font-medium text-gray-700">${item.model}</span>
                            <span class="text-xs text-gray-500">${item.timestamp}</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">${item.message}</p>
                        <div class="flex gap-4 text-xs">
                            <span class="flex items-center gap-1">
                                <span class="w-2 h-2 rounded-full ${item.statusCode === 200 ? 'bg-green-500' : 'bg-red-500'}"></span>
                                ${item.statusCode}
                            </span>
                            <span class="text-gray-500">${item.responseTime}ms</span>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            new GeminiAPITester();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96e35a96e4be5cd0',t:'MTc1NTAzNzE2Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
